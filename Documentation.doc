Platform Level (Super Admin)
â”œâ”€â”€ Hospitals (multiple, isolated)
â”‚   â”œâ”€â”€ Hospital A
â”‚   â”‚   â”œâ”€â”€ Departments
â”‚   â”‚   â”‚   â”œâ”€â”€ Radiology
â”‚   â”‚   â”‚   â”œâ”€â”€ Laboratory
â”‚   â”‚   â”‚   â””â”€â”€ Cardiology
â”‚   â”‚   â”œâ”€â”€ Hospital Admin
â”‚   â”‚   â”œâ”€â”€ Doctors (per department)
â”‚   â”‚   â”œâ”€â”€ Nurses (per department)
â”‚   â”‚   â””â”€â”€ Patients (per hospital)
â”‚   â””â”€â”€ Hospital B
â”‚       â””â”€â”€ (same structure)
â””â”€â”€ Cross-Hospital Record Sharing (approved only)



## ğŸ”„ Updated User Roles & Permissions

### **New Role Hierarchy:**
```
Platform Level:
â””â”€â”€ super_admin (Platform Owner)
    â””â”€â”€ Approves hospitals
    â””â”€â”€ Approves cross-hospital sharing
    â””â”€â”€ System-wide access

Hospital Level:
â””â”€â”€ hospital_admin (Hospital Owner)
    â”œâ”€â”€ Approves doctors, nurses, staff
    â”œâ”€â”€ Manages departments
    â””â”€â”€ Hospital-wide access

Department Level:
â”œâ”€â”€ doctor
â”‚   â”œâ”€â”€ Can view all patient records in their hospital
â”‚   â”œâ”€â”€ Can create medical records
â”‚   â”œâ”€â”€ Can order tests (any department)
â”‚   â””â”€â”€ Can view test results (after payment)
â”‚
â”œâ”€â”€ nurse
â”‚   â”œâ”€â”€ Can view patient records (limited)
â”‚   â”œâ”€â”€ Can update vital signs
â”‚   â””â”€â”€ Cannot order tests
â”‚
â””â”€â”€ department_staff (Lab Tech, Radiologist, etc.)
    â”œâ”€â”€ Can ONLY see test orders sent to their department
    â”œâ”€â”€ Can see payment status indicator
    â”œâ”€â”€ Can upload results ONLY after payment
    â””â”€â”€ Cannot see other departments' data

Patient Level:
â””â”€â”€ patient
    â”œâ”€â”€ Can view ALL their records from ALL hospitals
    â”œâ”€â”€ Can see test orders and payment status
    â”œâ”€â”€ Can download results
    â””â”€â”€ Cross-hospital view (automatic)
```

---

## ğŸ” Permission Matrix

| Action | Super Admin | Hospital Admin | Doctor | Nurse | Dept Staff | Patient |
|--------|-------------|----------------|--------|-------|------------|---------|
| **Approve Hospital** | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |
| **Approve Cross-Hospital Sharing** | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ |
| **Approve Staff** | âŒ | âœ… | âŒ | âŒ | âŒ | âŒ |
| **Create Department** | âŒ | âœ… | âŒ | âŒ | âŒ | âŒ |
| **View All Hospital Records** | âœ… | âœ… | âœ… | âš ï¸ Limited | âŒ | âŒ |
| **Create Medical Record** | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ |
| **Order Test** | âŒ | âŒ | âœ… | âŒ | âŒ | âŒ |
| **See Test Orders (Own Dept Only)** | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| **See Payment Status** | âŒ | âœ… | âœ… | âŒ | âœ… | âœ… |
| **Upload Test Result (After Payment)** | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| **View Own Records (All Hospitals)** | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… |



## ğŸ”„ New Workflows

### **Workflow 1: Hospital Registration**
```
1. Hospital fills registration form
   â”œâ”€â”€ Name, address, registration number
   â”œâ”€â”€ Admin user details
   â””â”€â”€ Subscription plan

2. Super Admin receives notification

3. Super Admin reviews and approves/rejects
   â””â”€â”€ If approved: Hospital becomes active

4. Hospital Admin can now:
   â”œâ”€â”€ Create departments
   â”œâ”€â”€ Invite staff
   â””â”€â”€ Manage settings
```

---

### **Workflow 2: Test Order with Payment**
```
1. Doctor examines patient
   â””â”€â”€ Creates medical record

2. Doctor orders test
   â”œâ”€â”€ Selects department (e.g., Radiology)
   â”œâ”€â”€ Specifies test type (e.g., X-Ray)
   â””â”€â”€ Test order created with status: "payment_pending"

3. Patient sees test order
   â”œâ”€â”€ Status: "Payment Required"
   â”œâ”€â”€ Amount: $150
   â””â”€â”€ Payment button visible

4. Patient makes payment
   â”œâ”€â”€ Payment gateway processes
   â””â”€â”€ Test order updated: paymentStatus = "paid"

5. Department staff sees order
   â”œâ”€â”€ âœ… Green indicator: "Payment Confirmed"
   â”œâ”€â”€ Can now upload results
   â””â”€â”€ Upload button enabled

6. Department uploads test result
   â”œâ”€â”€ Upload PDF/Image
   â”œâ”€â”€ Add notes
   â””â”€â”€ Test order status: "completed"

7. Doctor receives notification
   â””â”€â”€ Can view result

8. Patient can view/download result
```

---

### **Workflow 3: Cross-Hospital Record Sharing**
```
1. Hospital A wants to view Hospital B's records

2. Hospital A sends sharing request
   â””â”€â”€ Via super admin approval system

3. Super Admin reviews
   â”œâ”€â”€ Checks subscription status
   â”œâ”€â”€ Verifies compliance
   â””â”€â”€ Approves/denies

4. If approved:
   â”œâ”€â”€ Hospital A doctors can see Hospital B records
   â”œâ”€â”€ Only for patients who visited both hospitals
   â””â”€â”€ Audit log tracks all access